@import url('https://fonts.googleapis.com/css2?family=Fira+Code&display=swap')

buttonTime = 0.5s
openTime = 0.5s
tsSize = 3.2rem
extendedSize = 16rem
primary = #FFF
secondary = #111

truncate(width, height, size)
    clip-path: polygon(0% 0%, "calc(%s - %s)" % (width size) 0%, width size, width "calc(%s - %s)" % (height size), "calc(%s - %s)" % (width size) height, 0% height)

#container
    position: fixed
    left: 0em
    top: 20vh
    truncate(100%, tsSize, 0.4rem)
    transition: width buttonTime, clip-path openTime

    overflow: hidden

    display: inline-block
    font-family: 'Source Sans Pro', Arial, sans-serif
    font-size: 1rem

    &.activated
        truncate(100%, 100%, 0.4rem)
// Use clip-path as a hack instead of using height: auto because it can be animated.
// This does effectively the same thing but doesn't trigger a reflow.

#interior
    color: primary
    background: secondary
    width: tsSize
    display: inline-block
    transition: width buttonTime

    #title:hover + &, #container.activated > &
        width: extendedSize

#container-shadow
    filter: drop-shadow(3px 3px 2px #0004) drop-shadow(0px 0px 5px #0002)
    position: fixed
    left: 0em
    top: 0em
    width: 0em
    height: 0em
    display: inline-block

#title
    position: relative // To allow for vertically centered text in title-interior
    width: tsSize
    height: "calc(%s + 1px)" % tsSize // Add 1px to avoid seeing the line between #title and #interior.
    box-sizing: border-box
    padding-left: 0.5em
    padding-right: 0.5em
    font-size: 2em
    color: primary
    background-color: secondary

    white-space: nowrap

    transition: color buttonTime, background buttonTime, width buttonTime, padding-left buttonTime, padding-right buttonTime

    user-select: none
    cursor: pointer

    &:hover, #container.activated > &
        width: extendedSize
        color: secondary
        background: primary
        padding-left: 1em
        padding-right: 1em

        & span
            width: 0em
        & svg
            fill: secondary
        & > #icon
            left: -1.5em
    &:active
        filter: brightness(95%)

#title-interior
    position: absolute
    top: 50% // Vertically centered text.
    transform: translate(0%, calc((-100% - 1px) / 2)) // Add 1px due to adjustment in #title
    font-size: tsSize

    & > span
        width: 3em
        transition: width buttonTime
        display: inline-block

#icon
    width: 1.5em
    height: 1.5em
    position: absolute
    transform: translateY(calc((-100% - 1px) / 2)) // See above. ^
    top: 50%
    left: -0.05em

    transition: left buttonTime

    & > svg
        transition: fill buttonTime
        fill: primary